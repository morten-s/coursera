<div id="form" ng-controller="RegistrationController as reg">
    <fieldset>
        <legend>Registration</legend>
        <form name="regForm" novalidate>

            <input type="text" name="firstname" placeholder="first name" ng-model="reg.user.firstname" required minlength="4" ng-maxlength="10">
            {{ reg.user.firstname }}
            <span ng-if="(regForm.firstname.$error.minlength || regForm.firstname.$error.required) && regForm.username.$touched">
                Firstname must be at least 4 characters long
            </span>
            <span ng-if="regForm.firstname.$error.maxlength && regForm.firstname.$touched">
                Firstname must not be longer than 10 characters
            </span>
            <br>

            <input type="text" name="lastname" placeholder="last name" ng-model="reg.user.lastname" required minlength="4" ng-maxlength="10">
            {{ reg.user.lastname }}
            <span ng-if="(regForm.lastname.$error.minlength || regForm.lastname.$error.required) && regForm.username.$touched">
                Lastname must be at least 4 characters long
            </span>
            <span ng-if="regForm.lastname.$error.maxlength && regForm.lastname.$touched">
                Lastname must not be longer than 10 characters
            </span>
            <br>

            <input type="email" name="email" placeholder="Email" ng-model="reg.user.email" required>
            <span ng-if="regForm.email.$invalid && regForm.email.$touched">
                Must be a valid email address: handle@domain format
            </span>
            <br>

            <input type="text" name="phone" placeholder="Phone ###-###-####" ng-model="reg.user.phone" pattern="(\d{3})-(\d{3})-(\d{4})">
            <span ng-if="regForm.phone.$invalid && regForm.phone.$touched">
                Phone must be in the format ###-###-####.
            </span>
            <br>
            <input type="text" name="short_name" placeholder="Menu favorit shortname" ng-model="reg.user.short_name" required>
            <span ng-if="regForm.short_name.$invalid && regForm.short_name.$touched">
                No such menu number exists
            </span>

            <br>

            <button ng-disabled="regForm.$invalid" ng-click="reg.submit(regForm)">Submit</button>

        </form>
    </fieldset>
    <div id="info" ng-if="reg.completed">
        Your information has been saved
        <br>
        Username:
        {{ reg.user.firstname}} {{ reg.user.lastname}}
        <br>
        Email:
        {{ reg.user.email}}
        <br>
        Phone:
        {{ reg.user.phone }}
        <br>
        Favorit dish
        {{ reg.user.short_name}}
    </div>
</div>
